โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FESTA PROJECT - VISUAL DEPENDENCY TREE                    โ
โ                           October 26, 2025                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FESTA-V5-2/  (Project Root)                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ
โโโ ๐ src/  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Source Code - 252 KB]
โ   โ
โ   โโโ ๐ __init__.py ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Package marker]
โ   โ
โ   โโโ ๐ฏ festa_with_apis.py ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [MAIN ENTRY POINT - 20 KB]
โ   โ   โ
โ   โ   โฃโโโค imports: Config, LLaVAModel ยทยทยทยทยทยท from festa_evaluation
โ   โ   โฃโโโค imports: ComplementGenerator ยทยทยทยทยทยท from complement_generator
โ   โ   โฃโโโค loads: .env ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท (API keys)
โ   โ   โฃโโโค loads: BLINK dataset ยทยทยทยทยทยทยทยทยทยทยทยทยทยท (HuggingFace)
โ   โ   โโโโค outputs: results ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท to output/api_run/
โ   โ
โ   โโโ โ๏ธ  festa_evaluation.py ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Evaluation Engine - 82 KB]
โ   โ   โ
โ   โ   โฃโโโค provides: Config ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [class]
โ   โ   โฃโโโค provides: LLaVAModel ยทยทยทยทยทยทยทยทยทยทยทยทยทยท [class]
โ   โ   โฃโโโค uses: torch, transformers ยทยทยทยทยทยทยทยทยท (PyTorch, HF)
โ   โ   โฃโโโค uses: PIL, matplotlib ยทยทยทยทยทยทยทยทยทยทยทยทยท (Images, plots)
โ   โ   โโโโค loads: LLaVA model ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท from HuggingFace Hub
โ   โ       โโโค llava-hf/llava-v1.6-mistral-7b-hf
โ   โ
โ   โโโ ๐ complement_generator.py ยทยทยทยทยทยทยทยทยทยทยทยท [Generator System - 38 KB]
โ   โ   โ
โ   โ   โฃโโโค imports: get_fes_text_prompt ยทยทยทยทยทยท from prompts_text
โ   โ   โฃโโโค imports: get_fcs_text_prompt ยทยทยทยทยทยท from prompts_text
โ   โ   โฃโโโค imports: get_fes_image_prompt ยทยทยทยทยท from prompts_image
โ   โ   โฃโโโค imports: get_fcs_image_prompt ยทยทยทยทยท from prompts_image
โ   โ   โ
โ   โ   โฃโโโค provides: ComplementGenerator ยทยทยทยทยท [class]
โ   โ   โฃโโโค provides: SpatialRelationMapper ยทยทยท [class]
โ   โ   โฃโโโค provides: GPT4TextTransformer ยทยทยทยทยท [class]
โ   โ   โฃโโโค provides: GeminiImageTransformer ยทยท [class]
โ   โ   โ
โ   โ   โฃโโโค uses: OpenAI API ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท (text generation)
โ   โ   โฃโโโค uses: Google Gemini API ยทยทยทยทยทยทยทยทยทยท (image analysis)
โ   โ   โโโโค uses: PIL ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท (local transformations)
โ   โ
โ   โโโ ๐ prompts_text.py ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Text Prompts - 7.6 KB]
โ   โ   โ
โ   โ   โฃโโโค provides: get_fes_text_prompt() ยทยทยท [function]
โ   โ   โฃโโโค provides: get_fcs_text_prompt() ยทยทยท [function]
โ   โ   โฃโโโค provides: get_mcq_transform_prompt() [function]
โ   โ   โ
โ   โ   โฃโโโค contains: FES_TEXT_SYSTEM_PROMPT ยทยทยท [constant]
โ   โ   โโโโค contains: FCS_TEXT_SYSTEM_PROMPT ยทยทยท [constant]
โ   โ
โ   โโโ ๐ผ๏ธ  prompts_image.py ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Image Prompts - 15 KB]
โ       โ
โ       โฃโโโค provides: get_fes_image_prompt() ยทยทยท [function]
โ       โฃโโโค provides: get_fcs_image_prompt() ยทยทยท [function]
โ       โฃโโโค provides: get_image_analysis_prompt() [function]
โ       โ
โ       โฃโโโค contains: FES_IMAGE_SYSTEM_PROMPT ยทยทยท [constant]
โ       โโโโค contains: FCS_IMAGE_SYSTEM_PROMPT ยทยทยท [constant]
โ
โโโ ๐ config/  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Configuration - 12 KB]
โ   โ
โ   โโโ โ๏ธ  config.yaml ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [FESTA parameters]
โ       โ
โ       โฃโโโค generation: num_samples ยทยทยทยทยทยทยทยทยทยทยทยท [143]
โ       โฃโโโค fes: text_samples, image_samples ยทยทยท [5, 5]
โ       โโโโค fcs: text_samples, image_samples ยทยทยท [5, 3]
โ
โโโ ๐ paper/  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Reference - 9.6 MB]
โ   โ
โ   โโโ ๐ 2509.16648v1.pdf ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [FESTA framework paper]
โ
โโโ ๐ output/  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Runtime Artifacts]
โ   โ
โ   โโโ ๐ api_run/
โ       โโโ ๐ api_evaluation_results.json ยทยทยทยท [Metrics]
โ       โโโ ๐ api_evaluation_report.md ยทยทยทยทยทยทยท [Report]
โ       โโโ ๐ festa_*.log ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Execution logs]
โ       โ
โ       โโโ ๐ generated_samples/
โ           โโโ ๐ผ๏ธ  sample_N_original.png ยทยทยทยทยทยทยทยท [Original images]
โ           โโโ ๐ sample_N_fes_text_*.json ยทยทยทยทยท [FES text variants]
โ           โโโ ๐ sample_N_fcs_text_*.json ยทยทยทยทยท [FCS text variants]
โ           โโโ ๐ผ๏ธ  sample_N_fes_image_*.png ยทยทยทยทยท [FES image variants]
โ           โโโ ๐ผ๏ธ  sample_N_fcs_image_*.png ยทยทยทยทยท [FCS image variants]
โ
โโโ ๐ .env  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Secrets - NOT IN VCS]
โ   โ
โ   โฃโโโค OPENAI_API_KEY ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Required]
โ   โฃโโโค GOOGLE_API_KEY ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Required]
โ   โฃโโโค HF_TOKEN ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Optional]
โ   โฃโโโค NUM_SAMPLES ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Runtime param]
โ   โโโโค SKIP_SAMPLES ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Runtime param]
โ
โโโ ๐ .env.example ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Template]
โ
โโโ ๐ requirements.txt ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Python Dependencies]
โ   โ
โ   โฃโโโค torch>=2.0.0
โ   โฃโโโค transformers>=4.35.0
โ   โฃโโโค datasets>=2.14.0
โ   โฃโโโค openai>=1.0.0
โ   โฃโโโค google-generativeai>=0.3.0
โ   โฃโโโค Pillow>=10.0.0
โ   โฃโโโค scikit-learn>=1.3.0
โ   โโโโค ... [+ 20 more packages]
โ
โโโ ๐ .venv/  ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท [Virtual Environment - 8 GB]
    โโโ [All packages from requirements.txt]


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        RUNTIME EXECUTION FLOW                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    ๐ค USER
     โ
     โโโโค python3 -m src.festa_with_apis
           โ
           โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โโโโฅ  src/festa_with_apis.py  [ORCHESTRATOR]  โ
              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ                                        โ
                 โ  STEP 1: Initialize Components        โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ Load .env (API keys)         โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ          โ                             โ
                 โ          โฃโโค OPENAI_API_KEY           โ
                 โ          โโโค GOOGLE_API_KEY           โ
                 โ                                        โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ ComplementGenerator          โ     โ
                 โ  โ  โโ GPT4TextTransformer      โ     โ
                 โ  โ  โโ GeminiImageTransformer   โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ          โ                             โ
                 โ          โฃโโค prompts_text.py          โ
                 โ          โโโค prompts_image.py         โ
                 โ                                        โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ LLaVAModel (GPU)             โ     โ
                 โ  โ  โโ llava-1.6-mistral-7b     โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ          โ                             โ
                 โ          โโโค HuggingFace Hub          โ
                 โ              (Download if needed)      โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ                                        โ
                 โ  STEP 2: Load Dataset                 โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ BLINK-Benchmark/BLINK        โ     โ
                 โ  โ  Spatial_Relation subset     โ     โ
                 โ  โ  (143 samples)               โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ                                        โ
                 โ  STEP 3: Process Each Sample          โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ For sample in dataset:       โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ     โ                                  โ
                 โ     โฃโโค Save original image           โ
                 โ     โ                                  โ
                 โ     โฃโโค Run original inference (GPU)  โ
                 โ     โ                                  โ
                 โ     โฃโโค Generate FES Text ร 4         โ
                 โ     โ    โโโค OpenAI API               โ
                 โ     โ                                  โ
                 โ     โฃโโค Generate FCS Text ร 4         โ
                 โ     โ    โโโค OpenAI API               โ
                 โ     โ                                  โ
                 โ     โฃโโค Generate FES Images ร 4       โ
                 โ     โ    โโโค PIL (local)              โ
                 โ     โ                                  โ
                 โ     โฃโโค Generate FCS Images ร 4       โ
                 โ     โ    โโโค PIL (local)              โ
                 โ     โ                                  โ
                 โ     โโโค Run inference on all variants โ
                 โ         โโโค LLaVAModel (GPU)         โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ                                        โ
                 โ  STEP 4: Compute Metrics              โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โ  โ Accuracy                     โ     โ
                 โ  โ AUROC (if applicable)        โ     โ
                 โ  โ Precision/Recall/F1          โ     โ
                 โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    STEP 5: Save Results                โ
                    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                    โ output/api_run/              โ     โ
                    โ  โโ results.json             โ     โ
                    โ  โโ report.md                โ     โ
                    โ  โโ generated_samples/       โ     โ
                    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
                 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                          API DEPENDENCIES                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    External APIs Used:

    ๐ OpenAI API  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ                                                    โ
       โโโค Model: gpt-4o-mini                             โ
       โโโค Purpose: Text transformations                  โ
       โโโค Used by: GPT4TextTransformer                   โ
       โโโค Generates:                                      โ
           โโ FES text paraphrases (4 per sample)         โ
           โโ FCS text contradictions (4 per sample)      โ

    ๐ Google Gemini API  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
       โ                                                    โ
       โโโค Model: gemini-pro-latest                       โ
       โโโค Purpose: Image analysis                        โ
       โโโค Used by: GeminiImageTransformer                โ
       โโโค Analyzes: Spatial relationships                โ

    ๐ HuggingFace Hub  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
       โ                                                    โ
       โโโค Model: llava-v1.6-mistral-7b-hf                โ
       โโโค Dataset: BLINK-Benchmark/BLINK                 โ
       โโโค Purpose: Model & data download                 โ
       โโโค Size: ~14 GB model download                    โ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                       LEGEND & SYMBOLS                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    ๐  Directory/Folder
    ๐  Python source file
    ๐ฏ  Main entry point
    โ๏ธ   Configuration file
    ๐  Text/Document file
    ๐  Secret/Credential file
    ๐  Data/Results file
    ๐ผ๏ธ   Image file
    ๐  Log/Text output file

    โโโค  Direct dependency
    โฃโโ  Has/Contains
    โโโ  End of branch

    [...]  Description or type
    {...}  Optional component


Created: October 26, 2025
Purpose: Visual guide to FESTA project structure and dependencies

